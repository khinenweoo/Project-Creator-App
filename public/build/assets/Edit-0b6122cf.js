import{W as w,j as e,Y as D,a as T}from"./app-5858095f.js";import{L as C}from"./layout-2e57917c.js";import{D as n}from"./dropdown.esm-6d0b476a.js";import{I as d}from"./inputtext.esm-f681e55a.js";import{I as F}from"./inputtextarea.esm-21242d99.js";import{I as m}from"./InputError-a243d388.js";import{B as p}from"./button.esm-0c1e1465.js";import"./index.esm-b3326b5f.js";import"./index.esm-221320df.js";import"./overlayservice.esm-c8b303ea.js";import"./index.esm-2d5cbb4c.js";function M({auth:x,task:i,projects:g,users:h}){var c,u;const t=(i==null?void 0:i.data)||i||{},j=(i==null?void 0:i.data.id)||i.id,r=[{name:"pending",code:"pending"},{name:"in_progress",code:"in_progress"},{name:"completed",code:"completed"}];r.find(s=>s.code===t.status);const{data:a,setData:o,post:b,errors:l}=w({name:t.name||"",image:null,image_path:t.image_path||null,status:t.status||"",priority:t.priority||"",due_date:t.end_date||"",description:t.description||"",project_id:((c=t.project)==null?void 0:c.id)||"",assigned_user_id:((u=t.assignedUser)==null?void 0:u.id)||"",_method:"PUT"}),f=g.data.map(s=>({id:s.id,name:s.name})),N=[{name:"Highest",code:"highest"},{name:"Medium",code:"medium"},{name:"Low",code:"low"},{name:"Lowest",code:"lowest"}],_=h.data.map(s=>({id:s.id,name:s.name})),v=s=>{o("project_id",s)},y=s=>{s.preventDefault(),console.log("Form Data:",a);const k={...a,update_status:a.status?a.status.code:""};b(route("task.update",j),{task:k})};return e.jsxs(C,{user:x.data,children:[e.jsx(D,{title:"Task Edit"}),e.jsx("div",{className:"card",children:e.jsxs("section",{className:"max-w-xl",children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium",children:"Edit Task"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:['Edit your task "',t.name,'".']})]}),e.jsx("form",{onSubmit:y,className:"mt-4 space-y-6",children:e.jsxs("div",{className:"p-fluid formgrid grid",children:[e.jsx("div",{className:"mb-3 col-12 md:col-12",children:a.image_path&&e.jsx("div",{className:"mb-2 flex flex-wrap justify-content-start ",children:e.jsx("img",{src:a.image_path,alt:"Task Image",className:"w-12rem h-12rem border-round border-teal-600"})})}),e.jsxs("div",{className:"mb-3 col-12 md:col-6",children:[e.jsx("label",{htmlFor:"image",className:"block text-900 font-medium mb-2",children:"Task Image"}),e.jsx(d,{id:"task_image_path",type:"file",name:"image",className:" block w-full",onChange:s=>o("image",s.target.files[0])}),e.jsx(m,{message:l.image,className:""})]}),e.jsxs("div",{className:"mb-3 col-12 md:col-6",children:[e.jsx("label",{htmlFor:"email",className:"block text-900 font-medium mb-2",children:"Task Name"}),e.jsx(d,{id:"task_name",type:"text",name:"name",value:a.name,onChange:s=>o("name",s.target.value)}),e.jsx(m,{message:l.name,className:""})]}),e.jsxs("div",{className:"mb-3 col-12 md:col-12",children:[e.jsx("label",{htmlFor:"project",className:"block text-900 font-medium mb-2",children:"Project"}),e.jsx(n,{id:"project",name:"project_id",optionLabel:"name",optionValue:"id",value:a.project_id,options:f,onChange:s=>v(s.value),placeholder:"Select Project"}),e.jsx(m,{message:l.project_id,className:""})]}),e.jsxs("div",{className:"mb-3 col-12 md:col-6",children:[e.jsx("label",{htmlFor:"status",className:"block text-900 font-medium mb-2",children:"Status"}),e.jsx(n,{id:"status",name:"status",optionLabel:"name",optionValue:"code",value:a.status,options:r,onChange:s=>o("status",s.value),placeholder:"Select Status"}),e.jsx(m,{message:l.status,className:""})]}),e.jsxs("div",{className:"mb-3 col-12 md:col-6",children:[e.jsx("label",{htmlFor:"due_date",className:"block text-900 font-medium mb-2",children:"Due Date"}),e.jsx(d,{id:"due_date",type:"date",name:"due_date",value:a.due_date,onChange:s=>o("due_date",s.target.value)}),e.jsx(m,{message:l.due_date,className:""})]}),e.jsxs("div",{className:"mb-3 col-12 md:col-6",children:[e.jsx("label",{htmlFor:"priority",className:"block text-900 font-medium mb-2",children:"Priority"}),e.jsx(n,{id:"priority",name:"priority",optionLabel:"name",optionValue:"code",value:a.priority,onChange:s=>o("priority",s.value),options:N,placeholder:"Select Priority"}),e.jsx(m,{message:l.priority,className:""})]}),e.jsxs("div",{className:"mb-3 col-12 md:col-6",children:[e.jsx("label",{htmlFor:"priority",className:"block text-900 font-medium mb-2",children:"Task Assign User"}),e.jsx(n,{id:"assign_user",name:"assigned_user_id",optionLabel:"name",optionValue:"id",value:a.assigned_user_id,options:_,onChange:s=>o("assigned_user_id",s.value),placeholder:"Select Task Assign Person"}),e.jsx(m,{message:l.assigned_user_id,className:""})]}),e.jsxs("div",{className:"mb-3 col-12",children:[e.jsx("label",{htmlFor:"task_description",className:"block text-900 font-medium mb-2",children:"Description"}),e.jsx(F,{id:"task_description",name:"description",value:a.description,onChange:s=>o("description",s.target.value),rows:4}),e.jsx(m,{message:l.description,className:""})]}),e.jsxs("div",{className:"col-12 mt-4 text-right flex justify-content-end gap-3",children:[e.jsx(T,{href:route("task.index"),className:"",children:e.jsx(p,{label:"Cancel",type:"button",className:"p-button-outlined mr-2"})}),e.jsx(p,{label:"Update",type:"submit",severity:"info",className:"w-auto bg-indigo-500 hover:bg-indigo-700 focus:bg-indigo-600 active:bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150",icon:"pi pi-check"})]})]})})]})})]})}export{M as default};
